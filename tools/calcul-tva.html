<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculatrice TVA Rapide (20%, 10%, 5.5%) - MultiTools</title>
    <meta name="description"
        content="Calculez la TVA instantanément : HT vers TTC ou TTC vers HT. Tous les taux français disponibles.">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>

    <header>
        <div class="container nav-flex">
            <a href="../index.html" class="logo">
                <span>⚡</span> MultiTools
            </a>
            <nav>
                <a href="../index.html" class="btn-primary"
                    style="background: transparent; color: var(--text-main); border: 1px solid var(--border);">←
                    Retour</a>
            </nav>
        </div>
    </header>

    <main class="container">

        <div
            style="background: var(--bg-card); height: 90px; margin: 20px 0; border-radius: var(--radius-sm); border: 1px dashed var(--border); display: flex; align-items: center; justify-content: center; color: var(--text-muted);">
            Espace Publicitaire
        </div>

        <section class="calculator-layout">

            <div>
                <h1>Calculatrice TVA</h1>
                <p style="color: var(--text-muted); margin-bottom: 24px;">Passez du HT au TTC (et inversement) en un
                    instant.</p>

                <div class="calc-panel">
                    <div class="input-group">
                        <label for="vat-rate">Taux de TVA</label>
                        <div class="input-wrapper">
                            <select id="vat-rate">
                                <option value="20">20% (Taux Normal)</option>
                                <option value="10">10% (Restauration, Travaux)</option>
                                <option value="5.5">5.5% (Alimentaire, Livres)</option>
                                <option value="2.1">2.1% (Presse, Médicaments)</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div>
                            <label for="amount-ht">Montant HT</label>
                            <div class="input-wrapper">
                                <input type="number" id="amount-ht" placeholder="0.00" step="0.01">
                                <span class="suffix">€</span>
                            </div>
                        </div>
                        <div>
                            <label for="amount-ttc">Montant TTC</label>
                            <div class="input-wrapper">
                                <input type="number" id="amount-ttc" placeholder="0.00" step="0.01">
                                <span class="suffix">€</span>
                            </div>
                        </div>
                    </div>

                    <!-- Results Inline -->
                    <div class="result-box">
                        <div class="result-row highlight">
                            <span class="result-label">Montant de la TVA</span>
                            <span class="result-value val-vat">0,00 €</span>
                        </div>
                    </div>

                </div>
            </div>

            <aside>
                <div class="sidebar-ad">Pub Carrée</div>
            </aside>

        </section>
    </main>

    <script>
        const rateSelect = document.getElementById('vat-rate');
        const inputHT = document.getElementById('amount-ht');
        const inputTTC = document.getElementById('amount-ttc');
        const valVat = document.querySelector('.val-vat');
        let activeMode = 'HT'; // Last edited field

        function format(val) {
            return new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR' }).format(val);
        }

        function calculate() {
            const rate = parseFloat(rateSelect.value) / 100;

            if (activeMode === 'HT') {
                const ht = parseFloat(inputHT.value);
                if (!isNaN(ht)) {
                    const vat = ht * rate;
                    const ttc = ht + vat;
                    inputTTC.value = ttc.toFixed(2);
                    valVat.textContent = format(vat);
                }
            } else {
                const ttc = parseFloat(inputTTC.value);
                if (!isNaN(ttc)) {
                    const ht = ttc / (1 + rate);
                    const vat = ttc - ht;
                    inputHT.value = ht.toFixed(2);
                    valVat.textContent = format(vat);
                }
            }
        }

        inputHT.addEventListener('focus', () => activeMode = 'HT');
        inputTTC.addEventListener('focus', () => activeMode = 'TTC');

        [inputHT, inputTTC, rateSelect].forEach(el => {
            el.addEventListener('input', calculate);
        });
    </script>
</body>

</html>